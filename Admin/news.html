<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <title>Dashboard | Charles Stanley</title>
    <!-- Favicon-->
    <link rel="icon" href="favicon.ico" type="image/x-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&subset=latin,cyrillic-ext" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type="text/css">

    <!-- Bootstrap Core Css -->
    <link href="plugins/bootstrap/css/bootstrap.css" rel="stylesheet">

    <!-- Waves Effect Css -->
    <link href="plugins/node-waves/waves.css" rel="stylesheet" />

    <!-- Animation Css -->
    <link href="plugins/animate-css/animate.css" rel="stylesheet" />

    <!-- Morris Chart Css-->
    <link href="plugins/morrisjs/morris.css" rel="stylesheet" />

    <!-- Custom Css -->
    <link href="css/style.css" rel="stylesheet">

    <!-- AdminBSB Themes. You can choose a theme from css/themes instead of get all themes -->
    <link href="css/themes/all-themes.css" rel="stylesheet" />

</head>

<body class="theme-red">
    <!-- Page Loader -->
    <div class="row clearfix" style="">
      
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="card">
                        <div class="header" style="background-color:#EBF4FA;color: #000">
                            <h2 >News on Client Holding Shares</h2>
  
                        </div>
                        <div class="body" style="padding:10px 19px;overflow-y:scroll;clear:both; max-height: 300px;">
                            <div class="table-responsive">
                                <table class="table table-hover">
                            
                                    <tbody>
                                        <tr >
                                            <td>1</td>
                                            <td>4D Pharma receives license from US FDA - moneywise.co.uk</td>
                                           
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>Apple to open 20 new stores in UK - morningstar.co.uk</td>
                                          
                                        </tr>
                                        <tr>
                                            <td>3</td>
                                            <td>Total Tech fined USD 150mn for regulatory violations - uk.finance.yahoo.com</td>
                                           
                                        </tr>
                                        <tr >
                                                <td>4</td>
                                                <td>Samsung receives license from US FDA - moneywise.co.uk</td>
                                               
                                            </tr>
                                            <tr>
                                                <td>5</td>
                                                <td>Yahoo to open 20 new stores in UK - morningstar.co.uk</td>
                                              
                                            </tr>
                                            <tr>
                                                <td>6</td>
                                                <td>Total Tech fined USD 150mn for regulatory violations - uk.finance.yahoo.com</td>
                                               
                                            </tr>
                                            <tr >
                                                    <td>7</td>
                                                    <td>4D Pharma receives license from US FDA - moneywise.co.uk</td>
                                                   
                                                </tr>
                                                <tr>
                                                    <td>8</td>
                                                    <td>Apple to open 20 new stores in UK - morningstar.co.uk</td>
                                                  
                                                </tr>
                                                <tr>
                                                    <td>9</td>
                                                    <td>SunTech fined USD 150mn for regulatory violations - uk.finance.yahoo.com</td>
                                                   
                                                </tr>
                                                <tr >
                                                        <td>10</td>
                                                        <td>Google receives license from US FDA - moneywise.co.uk</td>
                                                       
                                                    </tr>
                                                    <tr>
                                                        <td>2</td>
                                                        <td>Apple to open 20 new stores in UK - morningstar.co.uk</td>
                                                      
                                                    </tr>
                                                    <tr>
                                                        <td>3</td>
                                                        <td>Total Tech fined USD 150mn for regulatory violations - uk.finance.yahoo.com</td>
                                                       
                                                    </tr>
                                            
                                       
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
        </div>

    <!-- Jquery Core Js -->
    <script src="plugins/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core Js -->
    <script src="plugins/bootstrap/js/bootstrap.js"></script>

    <!-- Select Plugin Js -->
    <script src="plugins/bootstrap-select/js/bootstrap-select.js"></script>

    <!-- Slimscroll Plugin Js -->
    <script src="plugins/jquery-slimscroll/jquery.slimscroll.js"></script>

    <!-- Waves Effect Plugin Js -->
    <script src="plugins/node-waves/waves.js"></script>

    <!-- Jquery CountTo Plugin Js -->
    <script src="plugins/jquery-countto/jquery.countTo.js"></script>

    <!-- Morris Plugin Js -->
    <script src="plugins/raphael/raphael.min.js"></script>
    <script src="plugins/morrisjs/morris.js"></script>

    <!-- ChartJs -->
    <script src="plugins/chartjs/Chart.bundle.js"></script>

    <!-- Flot Charts Plugin Js -->
    <script src="plugins/flot-charts/jquery.flot.js"></script>
    <script src="plugins/flot-charts/jquery.flot.resize.js"></script>
    <script src="plugins/flot-charts/jquery.flot.pie.js"></script>
    <script src="plugins/flot-charts/jquery.flot.categories.js"></script>
    <script src="plugins/flot-charts/jquery.flot.time.js"></script>

    <!-- Sparkline Chart Plugin Js -->
    <script src="plugins/jquery-sparkline/jquery.sparkline.js"></script>


     <!-- Jquery DataTable Plugin Js -->
     <script src="plugins/jquery-datatable/jquery.dataTables.js"></script>
     <script src="plugins/jquery-datatable/skin/bootstrap/js/dataTables.bootstrap.js"></script>
     <script src="plugins/jquery-datatable/extensions/export/dataTables.buttons.min.js"></script>
     <script src="plugins/jquery-datatable/extensions/export/buttons.flash.min.js"></script>
     <script src="plugins/jquery-datatable/extensions/export/jszip.min.js"></script>
     <script src="plugins/jquery-datatable/extensions/export/pdfmake.min.js"></script>
     <script src="plugins/jquery-datatable/extensions/export/vfs_fonts.js"></script>
     <script src="plugins/jquery-datatable/extensions/export/buttons.html5.min.js"></script>
     <script src="plugins/jquery-datatable/extensions/export/buttons.print.min.js"></script>
 
     <!-- Custom Js -->
 

     <!-- Demo Js -->
     <script src="js/embedscript.js"></script>
    <!-- Custom Js -->
    <script src="js/admin.js"></script>
    <script src="js/pages/tables/jquery-datatable.js"></script>

    <script src="js/pages/charts/morris.js"></script> 
    <!-- Demo Js -->
 
    <script src="js/demo.js"></script>
    <script>
     async function initiateAjax(url, type, data, callback) {
    await $.ajax({
        url: url,
        type: type,
        dataType: "json",
        data: data,
        success: function (result) {
            return callback(result, null);
        },
        error: function (err) {
            return callback(null, err);
        }
    });
}
$(function () {
    let pathlocation = window.location.search.substr(1);
    var querystring = pathlocation;
    var url = $(location).attr('href'),
        parts = url.split("/"),
        last_part = parts[parts.length - 1],
        final_url = last_part.split('?');
        let queryprofileid = querystring.split('=')[1];
        
    initiateAjax("/holdingcustomer", "POST", {
                params: queryprofileid
    }, function (data, err) {
   let points=[];
   $.each(data,function(index,value){
    points.push({  y: parseInt(value.Quantity.replace(",","")) , indexLabel: value.productsname.Name});
    var chart = new CanvasJS.Chart("chartContainer",
	{
		title:{
			text: ""
        },
        width:400,
		legend: {
			maxWidth: 350,
			itemWidth: 120,
		},
		data: [
		{
			type: "pie",
			showInLegend: true,
			legendText: "{indexLabel}",
			dataPoints: points
		}
		]
	});
    chart.render();
   })

  
});
initiateAjax("/lowperforming", "POST", {
                params: queryprofileid
    }, function (data, err) {
   
   let points=[];
   points.push({ y: parseInt(data[0]["productHoldings"]["Currentprice"].replace(",","").replace(".00","")) - parseInt(data[0]["productHoldings"]["Months6"].replace(",","").replace(".00","")), label: "6 Months" });
   points.push({ y: parseInt(data[0]["productHoldings"]["Currentprice"].replace(",","").replace(".00","")) - parseInt(data[0]["productHoldings"]["yr1"].replace(",","").replace(".00","")), label: "1 Year" });
   points.push({ y: parseInt(data[0]["productHoldings"]["Currentprice"].replace(",","").replace(".00","")) - parseInt(data[0]["productHoldings"]["yr3"].replace(",","").replace(".00","")), label: "3 Year" });
var chart3 = new CanvasJS.Chart("chartContainersss", {
	animationEnabled: true,
	title: {
		text: ""
	},
	axisY: {
		title: "Number of Sales",
		titleFontColor: "#4F81BC",
		suffix: ""
	},
	data: [{
		indexLabelFontColor: "darkSlateGray",
		name: "views",
		type: "area",
		yValueFormatString: "#,#",
		dataPoints: points
	}]
});
chart3.render();
});
});
    window.onload = function () {
	
    var chart2 = new CanvasJS.Chart("chartContainerss",
    {
      title:{
      text: ""
      },
        data: [
      {
        type: "stackedColumn",
        dataPoints: [
        {  y: 111338 , label: "Total Tech"},
        {  y: 49088, label: "Nelson PLC" },
        {  y: 62200, label: "Super Petro" },
        {  y: 90085, label: "MNG Rollings" },
        {  y: 38600, label: "SPF Holdings"}

        ]
      }
      ]
    });
    chart2.render();
    var chart1 = new CanvasJS.Chart("chartContainers",
    {
      title:{
      text: ""
      },
        data: [
      {
        type: "stackedColumn",
        dataPoints: [
        {  y: 111338 , label: "Apple"},
        {  y: 49088, label: "4D Pharma PLC" },
        {  y: 62200, label: "AA PLC" },
        {  y: 90085, label: "21st Century" },
        {  y: 38600, label: "ATF Group PLC"}

        ]
      }
      ]
    });

    chart1.render();
   


}




    </script>
   <script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
</body>

</html>
